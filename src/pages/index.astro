---
import { getCollection } from "astro:content";
import Job from "../components/Job.astro";
import Program from "../components/Program.astro";
import Project from "../components/Project.astro";
import { getJobs, getPrograms } from "../queries";
import Page from "../layouts/Page.astro";
import Letterhead from "../components/Letterhead/Letterhead.astro";

const skills = await getCollection("skills");
const jobs = await getJobs();
const programs = await getPrograms();
const projects = (await getCollection("projects")).sort(
    (a, b) => (b.data.priority ?? 0) - (a.data.priority ?? 0)
);
---

<Page>
    <header>
        <h1>Arden Sinclair</h1>
        <Letterhead />
        <ul class="contact">
            <li><a href="mailto:general@ardensinclair.com">general@ardensinclair.com</a></li>
            <li><a href="https://github.com/Arden144">github.com/arden144</a></li>
            <li><a href="tel:13067375563">(306) 737-5563</a></li>
            <li>Vancouver, BC</li>
        </ul>
        <ul class="contact">
            <li><a href="tel:6048229677">Tel: (604) 822-9677</a></li>
            <li><a href="tel:6048229676">Fax: (604) 822-9676</a></li>
            <li><a href="mailto:science.coop@ubc.ca">science.coop@ubc.ca</a></li>
            <li><a href="https://www.sciencecoop.ubc.ca">www.sciencecoop.ubc.ca</a></li>
        </ul>
    </header>
    <section>
        <h3>Technical Skills</h3>
        <ul>{skills.map(async entry => {
            const { Content } = await entry.render();
            return (
                <li class="skills">
                    <b>{entry.data.category}:</b>
                    <Content />
                </li>
            )
        })}</ul>
    </section>
    <section>
        <h3>Technical Projects</h3>
        {projects.map(project => <Project project={project} />)}
    </section>
    <section>
        <h3>Work Experience</h3>
        {jobs.map(job => <Job job={job} />)}
    </section>
    <section>
        <h3>Education</h3>
        {programs.map(program => <Program program={program} />)}
    </section>
</Page>

<style>
    header {
        display: grid;
        grid-template:
            "a b" calc(var(--h1-font-size) * 1.3)
            "c d" auto / auto auto;
        justify-content: space-between;
    }

    .contact {
        padding: 0;
        margin: 0;
        display: grid;
        justify-content: start;
        grid-template-columns: repeat(2, auto);
        font-size: 0.9rem;
        list-style-position: inside;
        column-gap: 1rem;
    }

    .skills {
        display: flex;
    }
</style>

<style is:global>
    a {
        color: inherit;
        text-decoration: inherit;
    }

    .skills > ul {
        list-style: none;
        display: inline-flex;
        flex-wrap: wrap;
        padding-left: 0.5rem;

        & > li {
            padding-right: 0.25rem;

            &:not(:last-child)::after {
                content: ";";
            }
        }
    }
</style>
